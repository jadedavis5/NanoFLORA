process COMBINE_FILES {

    input:
    path files
    
    output:
    path "combined-contaminants.fa"
    
    script:
    """
	for file in $files
	do
	if [[ "\$file" == *.gz ]]
	then 	
		zcat "\$file" >> combined-contaminants.fa
	else 
		cat "\$file" >> combined-contaminants.fa
	fi
	done
    """
}

process BASIC_REMOVE_GFF_SEQ_old {

	input:
	path original
	path canonical

	output:
	path "finalMerged_noncanonical-unspliced.gff"

	script:
	"""
	#!/usr/bin/env python3
	
	with open('$original') as f:
		original_gff = f.read().splitlines()

	with open('$canonical') as f:
    		canonical_gff = f.read().splitlines()

	result = list(set(original_gff)^set(canonical_gff))

	with open("finalMerged_noncanonical-unspliced.gff", "w") as f:
		for line in sorted(result): 
        		f.write(line + "\\n")
	"""
}


process BASIC_REMOVE_GFF_SEQ {

        input:
        path original
        path canonical

        output:
        path "finalMerged_noncanonical-unspliced.gff"

        script:
        """
        cat $canonical | awk '{if (\$3 == "transcript") print \$0}' |  >> finalMerged_noncanonical-unspliced.gff
        """
}
